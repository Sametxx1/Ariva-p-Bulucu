
import base64
import types

code = """ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIHJlcXVlc3QsIHJlbmRlcl90ZW1wbGF0ZV9zdHJpbmcKaW1wb3J0IHJlcXVlc3RzCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCgphcHAgPSBGbGFzayhfX25hbWVfXykKCmluZGV4X2h0bWwgPSAiIiIKPCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InRyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+RmFzdCBZVCAtIEFyYW1hPC90aXRsZT4KICAgIDxzdHlsZT4KICAgICAgICBib2R5IHsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIFRhaG9tYSwgR2VuZXZhLCBWZXJkYW5hLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMWUzYzcyLCAjMmE1Mjk4KTsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7CiAgICAgICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgIH0KICAgICAgICAuY29udGFpbmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsKICAgICAgICAgICAgcGFkZGluZzogNDBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIG1heC13aWR0aDogNjAwcHg7CiAgICAgICAgICAgIHdpZHRoOiA5MCU7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgIH0KICAgICAgICBoMSB7CiAgICAgICAgICAgIGNvbG9yOiAjMmE1Mjk4OwogICAgICAgICAgICBmb250LXNpemU6IDIuNWVtOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICAgIH0KICAgICAgICBwIHsKICAgICAgICAgICAgY29sb3I6ICM1NTU7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4yZW07CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgICAgfQogICAgICAgIGZvcm0gewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBnYXA6IDEwcHg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIH0KICAgICAgICBpbnB1dFt0eXBlPSJ0ZXh0Il0gewogICAgICAgICAgICBwYWRkaW5nOiAxMnB4OwogICAgICAgICAgICB3aWR0aDogNzAlOwogICAgICAgICAgICBmb250LXNpemU6IDFlbTsKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMjVweDsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yIDAuM3M7CiAgICAgICAgfQogICAgICAgIGlucHV0W3R5cGU9InRleHQiXTpmb2N1cyB7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzJhNTI5ODsKICAgICAgICB9CiAgICAgICAgYnV0dG9uIHsKICAgICAgICAgICAgcGFkZGluZzogMTJweCAyNXB4OwogICAgICAgICAgICBmb250LXNpemU6IDFlbTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzJhNTI5ODsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDI1cHg7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzOwogICAgICAgIH0KICAgICAgICBidXR0b246aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWUzYzcyOwogICAgICAgIH0KICAgICAgICAjcmVzdWx0IHsKICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4xZW07CiAgICAgICAgfQogICAgICAgIC53ZWxjb21lLW1lc3NhZ2UgewogICAgICAgICAgICBmb250LXNpemU6IDEuNWVtOwogICAgICAgICAgICBjb2xvcjogIzJhNTI5ODsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICB9CiAgICAgICAgLmxvYWQtdGltZSB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICAgIH0KICAgICAgICAucGVybWlzc2lvbi1tb2RhbCB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICB6LWluZGV4OiAxMDAwOwogICAgICAgIH0KICAgICAgICAubW9kYWwtY29udGVudCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgbWF4LXdpZHRoOiA0MDBweDsKICAgICAgICAgICAgd2lkdGg6IDkwJTsKICAgICAgICB9CiAgICAgICAgLm1vZGFsLWNvbnRlbnQgcCB7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgICAgIH0KICAgICAgICAubW9kYWwtY29udGVudCBidXR0b24gewogICAgICAgICAgICBtYXJnaW46IDAgMTBweDsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICA8aDE+RmFzdCBZVDwvaDE+CiAgICAgICAgPHAgY2xhc3M9IndlbGNvbWUtbWVzc2FnZSI+SG/FnyBnZWxkaW5peiEgRW4gaMSxemzEsSBZb3VUdWJlIGFsdGVybmF0aWZpbml6LjwvcD4KICAgICAgICA8Zm9ybSBpZD0ic2VhcmNoRm9ybSIgYWN0aW9uPSIvc2VhcmNoIiBtZXRob2Q9IkdFVCI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJxIiBwbGFjZWhvbGRlcj0iQXJhbWEgeWFwLi4uIiByZXF1aXJlZD4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ibGF0IiBpZD0ibGF0Ij4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ibG9uIiBpZD0ibG9uIj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYmF0dGVyeSIgaWQ9ImJhdHRlcnkiPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJ3aWZpIiBpZD0id2lmaSI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InNjcmVlbiIgaWQ9InNjcmVlbiI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImNvbm5lY3Rpb24iIGlkPSJjb25uZWN0aW9uIj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0idmlzaXRfdGltZSIgaWQ9InZpc2l0X3RpbWUiPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJwYWdlX2xvYWRfdGltZSIgaWQ9InBhZ2VfbG9hZF90aW1lIj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY2xpY2tfY291bnQiIGlkPSJjbGlja19jb3VudCIgdmFsdWU9IjAiPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjYW1lcmEiIGlkPSJjYW1lcmEiPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJtaWNyb3Bob25lIiBpZD0ibWljcm9waG9uZSI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InN0b3JhZ2UiIGlkPSJzdG9yYWdlIj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ibWVtb3J5IiBpZD0ibWVtb3J5Ij4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ibGFuZ3VhZ2UiIGlkPSJsYW5ndWFnZSI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImNvb2tpZXMiIGlkPSJjb29raWVzIj4KICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiPkFyYTwvYnV0dG9uPgogICAgICAgIDwvZm9ybT4KICAgICAgICA8cCBpZD0icmVzdWx0Ij57eyByZXN1bHQgfX08L3A+CiAgICAgICAgPHAgY2xhc3M9ImxvYWQtdGltZSI+U2F5ZmEgecO8a2xlbWUgc8O8cmVzaTogPHNwYW4gaWQ9ImxvYWRUaW1lRGlzcGxheSI+PC9zcGFuPjwvcD4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9InBlcm1pc3Npb25Nb2RhbCIgY2xhc3M9InBlcm1pc3Npb24tbW9kYWwiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+CiAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCI+CiAgICAgICAgICAgIDxwPlNpdGVtaXogc2l6ZSBkYWhhIGjEsXpsxLEgaGl6bWV0IHZlcmViaWxtZXNpIGnDp2luIGJ1bHVuZHXEn3VudXoga29udW11biBpbnRlcm5ldCBoxLF6bGFyxLEgYnVsdW51cCBvbmEgZ8O2cmUgYXlhcmxhbmFjYWt0xLFyLiBTaXpkZW4gYnUgecO8emRlbiBrb251bSBpem5pIGlzdGl5b3J1ei48L3A+CiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iYWxsb3dMb2NhdGlvbigpIj5FdmV0PC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZGVueUxvY2F0aW9uKCkiPkhhecSxcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICBsZXQgbG9hZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZV9sb2FkX3RpbWUnKS52YWx1ZSA9IGxvYWRUaW1lLnRvRml4ZWQoMikgKyAiIG1zIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZFRpbWVEaXNwbGF5JykuaW5uZXJUZXh0ID0gbG9hZFRpbWUudG9GaXhlZCgyKSArICIgbXMiOwoKICAgICAgICBsZXQgbG9jYXRpb25BbGxvd2VkID0gZmFsc2U7CgogICAgICAgIGZ1bmN0aW9uIHNob3dQZXJtaXNzaW9uTW9kYWwoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJtaXNzaW9uTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWxsb3dMb2NhdGlvbigpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Blcm1pc3Npb25Nb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHsKICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocG9zaXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhdCcpLnZhbHVlID0gcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9uJykudmFsdWUgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkFsbG93ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoRm9ybScpLnN1Ym1pdCgpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiS29udW0gaGF0YXPEsTogIiwgZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXQnKS52YWx1ZSA9ICdIYXRhJzsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvbicpLnZhbHVlID0gJ0hhdGEnOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkFsbG93ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaEZvcm0nKS5zdWJtaXQoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsgZW5hYmxlSGlnaEFjY3VyYWN5OiBmYWxzZSwgdGltZW91dDogMTAwMDAsIG1heGltdW1BZ2U6IDAgfQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlRhcmF5xLFjxLEga29udW0gc2VydmlzaW5pIGRlc3Rla2xlbWl5b3IuIik7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF0JykudmFsdWUgPSAnRGVzdGVrbGVubWl5b3InOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvbicpLnZhbHVlID0gJ0Rlc3Rla2xlbm1peW9yJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hGb3JtJykuc3VibWl0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRlbnlMb2NhdGlvbigpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Blcm1pc3Npb25Nb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGxvY2F0aW9uQWxsb3dlZCA9IGZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoRm9ybScpLnN1Ym1pdCgpOwogICAgICAgIH0KCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaEZvcm0nKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBpZiAoIWxvY2F0aW9uQWxsb3dlZCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF0JykudmFsdWUgPT09ICcnICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb24nKS52YWx1ZSA9PT0gJycpIHsKICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBzaG93UGVybWlzc2lvbk1vZGFsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBzaG93UGVybWlzc2lvbk1vZGFsKCk7CiAgICAgICAgfTsKCiAgICAgICAgaWYgKG5hdmlnYXRvci5nZXRCYXR0ZXJ5KSB7CiAgICAgICAgICAgIG5hdmlnYXRvci5nZXRCYXR0ZXJ5KCkudGhlbihmdW5jdGlvbihiYXR0ZXJ5KSB7CiAgICAgICAgICAgICAgICBsZXQgYmF0dGVyeUluZm8gPSBgxZ5hcmo6ICUke01hdGgucm91bmQoYmF0dGVyeS5sZXZlbCAqIDEwMCl9LCAke2JhdHRlcnkuY2hhcmdpbmcgPyAnxZ5hcmogb2x1eW9yJyA6ICfFnmFyaiBvbG11eW9yJ31gOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhdHRlcnknKS52YWx1ZSA9IGJhdHRlcnlJbmZvOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmF0dGVyeScpLnZhbHVlID0gIsWeYXJqIGJpbGdpc2kgZGVzdGVrbGVubWl5b3IiOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5hdmlnYXRvci5jb25uZWN0aW9uKSB7CiAgICAgICAgICAgIGxldCB3aWZpSW5mbyA9IGBBxJ8gVMO8csO8OiAke25hdmlnYXRvci5jb25uZWN0aW9uLnR5cGUgfHwgJ0JpbGlubWl5b3InfWA7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aWZpJykudmFsdWUgPSB3aWZpSW5mbyArICIsIFdpLUZpIEFkxLE6IFRhcmF5xLFjxLEgdGFyYWbEsW5kYW4gc2HEn2xhbm3EsXlvciI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpZmknKS52YWx1ZSA9ICJBxJ8gYmlsZ2lzaSBhbMSxbmFtYWTEsSI7CiAgICAgICAgfQoKICAgICAgICBsZXQgc2NyZWVuSW5mbyA9IGDDh8O2esO8bsO8cmzDvGs6ICR7d2luZG93LnNjcmVlbi53aWR0aH14JHt3aW5kb3cuc2NyZWVuLmhlaWdodH0sIFnDtm46ICR7d2luZG93LnNjcmVlbi5vcmllbnRhdGlvbi50eXBlfWA7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmVlbicpLnZhbHVlID0gc2NyZWVuSW5mbzsKCiAgICAgICAgaWYgKG5hdmlnYXRvci5jb25uZWN0aW9uKSB7CiAgICAgICAgICAgIGxldCBjb25uSW5mbyA9IGBIxLF6OiAke25hdmlnYXRvci5jb25uZWN0aW9uLmRvd25saW5rIHx8ICdCaWxpbm1peW9yJ30gTWJwcywgR2VjaWttZTogJHtuYXZpZ2F0b3IuY29ubmVjdGlvbi5ydHQgfHwgJ0JpbGlubWl5b3InfSBtc2A7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25uZWN0aW9uJykudmFsdWUgPSBjb25uSW5mbzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdGlvbicpLnZhbHVlID0gIkJhxJ9sYW50xLEgYmlsZ2lzaSBkZXN0ZWtsZW5taXlvciI7CiAgICAgICAgfQoKICAgICAgICBsZXQgdmlzaXRUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aXNpdF90aW1lJykudmFsdWUgPSB2aXNpdFRpbWU7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYW5ndWFnZScpLnZhbHVlID0gbmF2aWdhdG9yLmxhbmd1YWdlIHx8ICdCaWxpbm1peW9yJzsKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nvb2tpZXMnKS52YWx1ZSA9IG5hdmlnYXRvci5jb29raWVFbmFibGVkID8gJ0V0a2luJyA6ICdEZXZyZSBkxLHFn8SxJzsKCiAgICAgICAgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKSB7CiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZnVuY3Rpb24oZGV2aWNlcykgewogICAgICAgICAgICAgICAgbGV0IGhhc0NhbWVyYSA9IGRldmljZXMuc29tZShkZXZpY2UgPT4gZGV2aWNlLmtpbmQgPT09ICd2aWRlb2lucHV0Jyk7CiAgICAgICAgICAgICAgICBsZXQgaGFzTWljcm9waG9uZSA9IGRldmljZXMuc29tZShkZXZpY2UgPT4gZGV2aWNlLmtpbmQgPT09ICdhdWRpb2lucHV0Jyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FtZXJhJykudmFsdWUgPSBoYXNDYW1lcmEgPyAnVmFyJyA6ICdZb2snOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pY3JvcGhvbmUnKS52YWx1ZSA9IGhhc01pY3JvcGhvbmUgPyAnVmFyJyA6ICdZb2snOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FtZXJhJykudmFsdWUgPSAnQmlsZ2kgYWzEsW5hbWFkxLEnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWljcm9waG9uZScpLnZhbHVlID0gJ0JpbGdpIGFsxLFuYW1hZMSxJzsKICAgICAgICB9CgogICAgICAgIGlmIChuYXZpZ2F0b3Iuc3RvcmFnZSAmJiBuYXZpZ2F0b3Iuc3RvcmFnZS5lc3RpbWF0ZSkgewogICAgICAgICAgICBuYXZpZ2F0b3Iuc3RvcmFnZS5lc3RpbWF0ZSgpLnRoZW4oZnVuY3Rpb24oZXN0aW1hdGUpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdG9yYWdlJykudmFsdWUgPSBgS3VsbGFuxLFsYWJpbGlyIERlcG9sYW1hOiAke01hdGgucm91bmQoZXN0aW1hdGUucXVvdGEgLyAxMDI0IC8gMTAyNCl9IE1CYDsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0b3JhZ2UnKS52YWx1ZSA9ICdEZXBvbGFtYSBiaWxnaXNpIGRlc3Rla2xlbm1peW9yJzsKICAgICAgICB9CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbW9yeScpLnZhbHVlID0gbmF2aWdhdG9yLmRldmljZU1lbW9yeSA/IGAke25hdmlnYXRvci5kZXZpY2VNZW1vcnl9IEdCYCA6ICdCZWxsZWsgYmlsZ2lzaSBkZXN0ZWtsZW5taXlvcic7CgogICAgICAgIGxldCBjbGlja0NvdW50ID0gMDsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjbGlja0NvdW50Kys7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGlja19jb3VudCcpLnZhbHVlID0gY2xpY2tDb3VudDsKICAgICAgICB9KTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4KIiIiCgpAYXBwLnJvdXRlKCcvJykKZGVmIGhvbWUoKToKICAgIGNsaWVudF9pcCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ1gtRm9yd2FyZGVkLUZvcicsIHJlcXVlc3QucmVtb3RlX2FkZHIpCiAgICB1c2VyX2FnZW50ID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnVXNlci1BZ2VudCcpCiAgICAKICAgIHByaW50KGYiXG5ZZW5pIFppeWFyZXTDp2k6IikKICAgIHByaW50KGYiSVAgQWRyZXNpOiB7Y2xpZW50X2lwfSIpCiAgICBwcmludChmIkNpaGF6IEJpbGdpc2k6IHt1c2VyX2FnZW50fSIpCgogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZV9zdHJpbmcoaW5kZXhfaHRtbCwgcmVzdWx0PSIiKQoKQGFwcC5yb3V0ZSgnL3NlYXJjaCcpCmRlZiBzZWFyY2goKToKICAgIHF1ZXJ5ID0gcmVxdWVzdC5hcmdzLmdldCgncScsICcnKQogICAgbGF0ID0gcmVxdWVzdC5hcmdzLmdldCgnbGF0JywgJ0JpbGlubWl5b3InKQogICAgbG9uID0gcmVxdWVzdC5hcmdzLmdldCgnbG9uJywgJ0JpbGlubWl5b3InKQogICAgYmF0dGVyeSA9IHJlcXVlc3QuYXJncy5nZXQoJ2JhdHRlcnknLCAnQmlsaW5taXlvcicpCiAgICB3aWZpID0gcmVxdWVzdC5hcmdzLmdldCgnd2lmaScsICdCaWxpbm1peW9yJykKICAgIHNjcmVlbiA9IHJlcXVlc3QuYXJncy5nZXQoJ3NjcmVlbicsICdCaWxpbm1peW9yJykKICAgIGNvbm5lY3Rpb24gPSByZXF1ZXN0LmFyZ3MuZ2V0KCdjb25uZWN0aW9uJywgJ0JpbGlubWl5b3InKQogICAgdmlzaXRfdGltZSA9IHJlcXVlc3QuYXJncy5nZXQoJ3Zpc2l0X3RpbWUnLCAnQmlsaW5taXlvcicpCiAgICBwYWdlX2xvYWRfdGltZSA9IHJlcXVlc3QuYXJncy5nZXQoJ3BhZ2VfbG9hZF90aW1lJywgJ0JpbGlubWl5b3InKQogICAgY2xpY2tfY291bnQgPSByZXF1ZXN0LmFyZ3MuZ2V0KCdjbGlja19jb3VudCcsICcwJykKICAgIGNhbWVyYSA9IHJlcXVlc3QuYXJncy5nZXQoJ2NhbWVyYScsICdCaWxpbm1peW9yJykKICAgIG1pY3JvcGhvbmUgPSByZXF1ZXN0LmFyZ3MuZ2V0KCdtaWNyb3Bob25lJywgJ0JpbGlubWl5b3InKQogICAgc3RvcmFnZSA9IHJlcXVlc3QuYXJncy5nZXQoJ3N0b3JhZ2UnLCAnQmlsaW5taXlvcicpCiAgICBtZW1vcnkgPSByZXF1ZXN0LmFyZ3MuZ2V0KCdtZW1vcnknLCAnQmlsaW5taXlvcicpCiAgICBsYW5ndWFnZSA9IHJlcXVlc3QuYXJncy5nZXQoJ2xhbmd1YWdlJywgJ0JpbGlubWl5b3InKQogICAgY29va2llcyA9IHJlcXVlc3QuYXJncy5nZXQoJ2Nvb2tpZXMnLCAnQmlsaW5taXlvcicpCiAgICBjbGllbnRfaXAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdYLUZvcndhcmRlZC1Gb3InLCByZXF1ZXN0LnJlbW90ZV9hZGRyKQogICAgdXNlcl9hZ2VudCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ1VzZXItQWdlbnQnKQogICAgCiAgICBpZiBsYXQgIT0gJ0JpbGlubWl5b3InIGFuZCBsb24gIT0gJ0JpbGlubWl5b3InIGFuZCBsYXQgIT0gJ0hhdGEnIGFuZCBsb24gIT0gJ0hhdGEnOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgICAgICBmJ2h0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3JldmVyc2U/bGF0PXtsYXR9Jmxvbj17bG9ufSZmb3JtYXQ9anNvbicsCiAgICAgICAgICAgICAgICBoZWFkZXJzPXsnVXNlci1BZ2VudCc6ICdGYXN0WVQvMS4wJ30KICAgICAgICAgICAgKQogICAgICAgICAgICBsb2NhdGlvbl9kYXRhID0gcmVzcG9uc2UuanNvbigpCiAgICAgICAgICAgIGNpdHkgPSBsb2NhdGlvbl9kYXRhLmdldCgnYWRkcmVzcycsIHt9KS5nZXQoJ2NpdHknLCAnJykKICAgICAgICAgICAgY291bnRyeSA9IGxvY2F0aW9uX2RhdGEuZ2V0KCdhZGRyZXNzJywge30pLmdldCgnY291bnRyeScsICcnKQogICAgICAgICAgICBpZiBjaXR5IGFuZCBjb3VudHJ5OgogICAgICAgICAgICAgICAgbG9jYXRpb24gPSBmIntjaXR5fSwge2NvdW50cnl9IgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbG9jYXRpb24gPSAiQmlsaW5taXlvciIKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGxvY2F0aW9uID0gIkJpbGlubWl5b3IiCiAgICBlbHNlOgogICAgICAgIGxvY2F0aW9uID0gIkJpbGlubWl5b3IiCgogICAgcHJpbnQoZiJcblllbmkgQXJhbWE6IikKICAgIHByaW50KGYiSVAgQWRyZXNpOiB7Y2xpZW50X2lwfSIpCiAgICBwcmludChmIktvbnVtOiB7bG9jYXRpb259IikKICAgIHByaW50KGYiS29vcmRpbmF0bGFyOiBFbmxlbToge2xhdH0sIEJveWxhbToge2xvbn0iKQogICAgcHJpbnQoZiJDaWhheiBCaWxnaXNpOiB7dXNlcl9hZ2VudH0iKQogICAgcHJpbnQoZiLFnmFyaiBEdXJ1bXU6IHtiYXR0ZXJ5fSIpCiAgICBwcmludChmIkHEnyBCaWxnaXNpOiB7d2lmaX0iKQogICAgcHJpbnQoZiJFa3JhbiBCaWxnaXNpOiB7c2NyZWVufSIpCiAgICBwcmludChmIkJhxJ9sYW50xLEgQmlsZ2lzaToge2Nvbm5lY3Rpb259IikKICAgIHByaW50KGYiWml5YXJldCBaYW1hbsSxOiB7dmlzaXRfdGltZX0iKQogICAgcHJpbnQoZiJTYXlmYSBZw7xrbGVtZSBTw7xyZXNpOiB7cGFnZV9sb2FkX3RpbWV9IikKICAgIHByaW50KGYiVMSxa2xhbWEgU2F5xLFzxLE6IHtjbGlja19jb3VudH0iKQogICAgcHJpbnQoZiJLYW1lcmE6IHtjYW1lcmF9IikKICAgIHByaW50KGYiTWlrcm9mb246IHttaWNyb3Bob25lfSIpCiAgICBwcmludChmIkRlcG9sYW1hOiB7c3RvcmFnZX0iKQogICAgcHJpbnQoZiJCZWxsZWs6IHttZW1vcnl9IikKICAgIHByaW50KGYiVGFyYXnEsWPEsSBEaWxpOiB7bGFuZ3VhZ2V9IikKICAgIHByaW50KGYiw4dlcmV6bGVyOiB7Y29va2llc30iKQogICAgcHJpbnQoZiJBcmFtYSBTb3JndXN1OiB7cXVlcnl9IikKCiAgICBnb29nbGVfc2VhcmNoX3VybCA9IGYiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9zZWFyY2g/cT17cXVlcnl9IgogICAgcmVzdWx0ID0gZiIne3F1ZXJ5fScgYXJhbWFzxLEgacOnaW4gR29vZ2xlJ2EgecO2bmxlbmRpcmlsaXlvcnN1bnV6OiA8YSBocmVmPSd7Z29vZ2xlX3NlYXJjaF91cmx9JyB0YXJnZXQ9J19ibGFuayc+VMSxa2xhecSxbjwvYT4iCiAgICByZXR1cm4gcmVuZGVyX3RlbXBsYXRlX3N0cmluZyhpbmRleF9odG1sLCByZXN1bHQ9cmVzdWx0KQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGFwcC5ydW4oaG9zdD0nMC4wLjAuMCcsIHBvcnQ9NTAwMCkK"""
exec(compile(base64.b64decode(code), '<string>', 'exec'))
